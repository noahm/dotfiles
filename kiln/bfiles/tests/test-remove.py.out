% setup
hg init -q
hg add -q normal1 sub/normal2 sub/normal3.txt sub/normal4.txt
hg commit -m 'add normal files'

% add bfiles
hg add -q --bf big1 sub/big2 sub/big3.txt sub/big4 sub2/big5
hg commit -m 'added bfiles'

% remove sub/*.txt
hg remove 'glob:sub/*.txt'
hg status
hg commit -m 'remove bfiles'

% test update
hg up -r 1
hg up

% remove single normal files and add
hg remove normal1 sub/normal2
hg add normal1 sub/normal2
hg status

% remove single bfile and commit with full path
hg remove sub/big4
hg status
hg commit -m 'removing big4' sub/big4
hg status

% remove single bfile and commit with partial path
hg remove sub2/big5
hg status
hg commit -m 'removing big5' sub2
hg status

% remove single bfiles and add
hg remove big1 sub/big2
hg add --bf big1 sub/big2
hg status

% remove single normal files
hg remove normal1
hg remove sub/normal2
hg status

% remove single bfiles
hg remove big1
hg remove sub/big2
hg status
hg commit -m 'all gone'
hg status
