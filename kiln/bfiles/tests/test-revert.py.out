% setup
hg init -q
hg add n1 n2.txt dir/n3 dir/dir/n4.txt
hg add --bf
hg status
hg commit -m 'added files'
hg commit -m 'edit files'
hg rename 'glob:**.txt' txtfiles
hg commit -m 'rename files'
hg rm n1 dir/b3
hg commit -m 'remove files'

% revert all
hg revert -a
hg status
hg revert -a -r 0
hg status
hg revert -a
hg status

% revert specific files
hg revert -r 1 'glob:**.txt'
hg status
hg revert -r 0 n2.txt b2.txt
hg status
hg init -q
hg add n1
hg commit -m 'added normal file'
hg add --bf b1
hg commit -m 'added bfile'
hg revert n1
hg init -q
hg add --bf b1
hg commit -m 'added first bfile'
hg add --bf b2
hg commit -m 'added second bfile'
hg revert b1

% revert uncommitted files
hg init -q
hg add n1
hg commit -m 'add normal file'
hg add --bf b1
hg revert b1
hg status
hg add b1
hg status
hg revert b1
hg add --bf b1
hg revert --all
hg status
hg add b1
hg status
hg revert b1
hg add --bf b1
hg commit -m 'add bfile'
hg add --bf b2
hg revert b2
hg status
hg add --bf b2
hg revert --all
hg status
hg add --bf
hg revert b3
hg status
hg commit -m 'add another bfile'
hg rm b2
hg revert b2
hg rm b2
hg revert --all
